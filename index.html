<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Attendance Dashboard</title>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <header class="hdr">
    <div><h1>Lab Attendance Dashboard</h1></div>
    <div class="hdr-right">
      <span id="lastUpdated">—</span>
      <button id="notifyToggle" class="notify-toggle" title="Toggle Sound Notifications">
        <svg id="notifyOnIcon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"/>
        </svg>
        <svg id="notifyOffIcon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
          <path d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"/>
          <path d="M3.28,2L22,20.72L20.72,22L15.73,17H13V21H11V17H9A5,5 0 0,1 4,12H2C2,14.53 4.61,17.44 8,17.93V21H10V17.93C10.33,17.97 10.66,18 11,18C11.34,18 11.67,17.97 12,17.93V21H14V17.93C17.39,17.44 20,14.53 20,12H18C18,8.69 15.31,6 12,6C10.34,6 8.84,6.69 7.78,7.78L3.28,2Z"/>
        </svg>
      </button>
      <button id="themeToggle" class="theme-toggle" title="Toggle Dark/Light Theme">
        <svg id="sunIcon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>
        </svg>
        <svg id="moonIcon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
          <path d="M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.95 20.77,15.53 21.64,14.69C22.5,13.84 22.92,12.87 22.92,12C22.92,11.13 22.5,10.16 21.64,9.31C20.77,8.47 19.8,8.05 18.97,8.05C18.14,8.05 17.17,8.47 16.31,9.31C15.45,10.16 15.03,11.13 15.03,12C15.03,12.87 15.45,13.84 16.31,14.69C17.17,15.53 18.14,15.95 18.97,15.95M14.5,22.39C14.5,22.39 13.5,22.39 12,22.39C10.5,22.39 9.5,22.39 9.5,22.39C9.5,21.16 10.45,20.21 11.68,20.21C12.91,20.21 13.86,21.16 13.86,22.39C13.86,23.62 12.91,24.57 11.68,24.57C10.45,24.57 9.5,23.62 9.5,22.39M12,2A10,10 0 0,0 2,12A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>
        </svg>
      </button>
      <button id="refreshBtn">Refresh</button>
    </div>
  </header>

  <main class="main container">
    <section class="card summary">
      <div class="summary-stats">
        <div class="stat-item">
          <span class="stat-label">Total Records</span>
          <span class="stat-value" id="total">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Active Labs</span>
          <span class="stat-value" id="labCount">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Current Lab</span>
          <select id="labFilter" class="lab-selector">
            <option value="all">All Labs</option>
          </select>
        </div>
      </div>
      <div class="action-buttons">
        <a id="downloadLink" class="btn primary" target="_blank">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
          </svg>
          Download CSV
        </a>
        <button id="analyticsBtn" class="btn secondary">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M22,21H2V3H4V19H6V10H10V19H12V6H16V19H18V14H22V21Z"/>
          </svg>
          Analytics
        </button>
        <button id="studentMgmtBtn" class="btn secondary">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
          </svg>
          Students
        </button>
        <button id="clearBtn" class="btn danger">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"/>
          </svg>
          Clear Data
        </button>
      </div>
    </section>

    <!-- Search and Filter Section -->
    <section class="search-section">
      <div class="search-container">
        <div class="search-box">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="search-icon">
            <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
          </svg>
          <input type="text" id="searchInput" placeholder="Search by RA number..." class="search-input">
          <button id="clearSearch" class="clear-search" title="Clear search">×</button>
        </div>
        <div class="filter-controls">
          <input type="date" id="dateFrom" class="date-filter" title="From date">
          <input type="date" id="dateTo" class="date-filter" title="To date">
          <button id="applyFilters" class="btn filter-btn">Apply Filters</button>
          <button id="clearFilters" class="btn filter-btn secondary">Clear</button>
        </div>
      </div>
    </section>

    <section id="tables" class="tables-container"></section>
  </main>

  <footer class="footer">Prototype • Data: Google Sheets • Auto-refresh every 1s</footer>
  <script src="/script.js"></script>
</body>
</html>